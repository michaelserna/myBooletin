<div id="events" ng-init = 'initFB()'>
    <div class="paper floatLeft">
      <h1>Events</h1>
      <span><i>Showing {{events.length}} events for {{targetZipsString}}</i></span>
      <form>
        <input type="text" ng-model="searchText" placeholder='Search'>
        <div class="pastEvents">
          <p class="eventOccurrenceFilter" ng-click="showEvents('past')">
            Show past events
          </p>
          <p class="eventOccurrenceFilter" ng-click="showEvents('future')">
            Show future events
          </p>
        </div>
      </form>
    </div>

    <div  ng-controller="mapController"class="paper floatLeft event" ng-repeat="event in events | filter: dateSort | filter:searchText | orderBy: 'startDate'">
      <img class="center" src="assets/PushPin.png"/>
      <h3><p ng-model='event.eventName'><h4>Event:</h4> {{event.eventName}}</p></h3>

      <p ng-model='event.streetAddress'><strong>Address:</strong> {{event.streetAddress}}<br><a ng-click="isCollapsedMap = !isCollapsedMap">hide map</a></p>
      <div   uib-collapse="isCollapsedMap">
        <ng-map default-style="true" zoom="16" scrollwheel="false" center="{{loc.x}}, {{loc.y}}">
          <marker position="{{loc.x}}, {{loc.y}}"></marker>
        </ng-map>
      </div>
      <p ng-model='event.eventDescription'><strong>Description:</strong> {{event.eventDescription}}</p>

      <p>
         <button ng-click ="createUrlForNewCalendarEvent(event.eventName, event.startDate, event.time, event.eventDescription, event.streetAddress)">Add this event to my calendar!</button>
      </p>


      <p ng-model='event.startDate'><strong>Date:</strong> {{event.startDate}}</p>
      <p ng-model='event.time'><strong>Time:</strong> {{event.time}}</p>
      <img class='eventImage' ng-src='{{event.photo}}'/>
      <p ng-model='event.tags'><strong>Tags:</strong> {{event.tags}}</p>


      <div ng-controller="RatingDemoCtrl" id = 'abc' ng-click = 'saveRatingToFireBase()'>
          <h4 ng-controller = 'addEvents'>Rating of Event</h4>
          <uib-rating ng-model="rate" max="max" read-only="isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null" titles="['one','two','three']" aria-labelledby="default-rating"></uib-rating>
          <span class="label" ng-class="{'label-warning': percent<30, 'label-info': percent>=30 && percent<70, 'label-success': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span>
          <button type="button" class="btn btn-sm btn-danger" ng-click="rate = 0" ng-disabled="isReadonly">Clear</button>
          <pre style="margin:15px 0;">Rate: <b>{{rate}}</b></b></pre>

          <div 
     class="fb-like"
     data-href="http://mybooletin.herokuapp.com/#/events/no"
     data-href="http://localhost:4569/#/events/no"
     data-share="true"
     data-width="450"
     data-show-faces="true">
   </div>

      </div>

    
   </div>
</div>



