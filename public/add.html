<script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '1036179246446029',
        xfbml      : true,
        version    : 'v2.5'
      });
    };

    (function(d, s, id){
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement(s); js.id = id;
       js.src = "//connect.facebook.net/en_US/sdk.js";
       fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));
</script>

<div id="add" class="paper floatLeft" ng-init="initFB()" flow-init flow-name="image.flow" flow-file-added="!!{png:1,gif:1,jpg:1,jpeg:1}[$file.getExtension()]">
    <div class="col-sm-8 col-sm-offset-1" ng-click = "change()">
        <h1 class="text-center" >Add Event</h1>
        <form name="addEventForm" ng-submit="submitForm(addEventForm.$valid)" novalidate>
           <!--  <div class="form-group" ng-class="{'has-error': addEventForm.eventName.$invalid}">
                <label>Zip Code</Label>
                <input type="text" class="form-control" placeholder="e.g. 94117" name="zipCode" ng-model="newEvent.zipCode" required ng-minlength="5" ng-maxlength="5" valid-zip/>
                <br>
                <span class="help-block" ng-show="addEventForm.zipCode.$error.required">Required</span>
                <span class="help-block" ng-show="addEventForm.zipCode.$pending.validZip">Checking if zip code is valid...</span>
                <span class="help-block" ng-show="addEventForm.zipCode.$error.validZip">Not a valid zip code</span>
                <span class="help-block" ng-show="addEventForm.zipCode.$error.minlength">Zip code must be 5 digits</span>
                <span class="help-block" ng-show="addEventForm.zipCode.$error.maxlength">Zip code must be 5 digits</span>
            </div> -->
            <div class="form-group" ng-class="{ 'has-error' : addEventForm.eventName.$invalid && addEventForm.eventName.$touched }">
                <label>Event Name</label>
                <input type="text" class="form-control" name="eventName" placeholder="e.g. Food Truck Friday" ng-model="newEvent.eventName" required>
                <p ng-show="addEventForm.eventName.$invalid && addEventForm.eventName.$touched" class="help-block">Event name required</p>
                <!-- <span class="help-block" ng-show="addEventForm.eventName.$error.required">Required</span> -->
            </div>
            <div class="form-group" ng-class="{'has-error': addEventForm.address.$invalid && addEventForm.address.$touched}">
            <label>Street Address</label>
                <input type="text" class="form-control" ng-model="newEvent.streetAddress"  placeholder="e.g. 123 Main Street, Apt 1A" uib-typeahead="address for address in getLocation($viewValue)" typeahead-loading="loadingLocations" typeahead-no-results="noResults" class="form-control" name="address" required>
                <p ng-show="addEventForm.address.$invalid && addEventForm.address.$touched" class="help-block">Address required</p>
                <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                <div ng-show="noResults">
                  <i class="glyphicon glyphicon-remove"></i> No Results Found
                </div>
            </div>

            <div class="form-group" ng-class="{'has-error': addEventForm.description.$invalid && addEventForm.description.$touched}">
                <label>Event Description</label>
                <textarea type="text" class="form-control" name="description" placeholder="Description" required ng-model="newEvent.eventDescription"></textarea>
                <span class="help-block" ng-show="addEventForm.description.$invalid && addEventForm.description.$touched">Please enter a description</span>
            </div>
            <div class="form-group" ng-class="{'has-error': addEventForm.date.$invalid && addEventForm.date.$touched}">
                <label>Start Date</label>
                <input type="date" class="form-control" name="date" min="2016-02-22" placeholder="Date" required ng-model="newEvent.startDate">
                <span class="help-block" ng-show="addEventForm.date.$invalid && addEventForm.date.$touched">Please enter a date</span>
            </div>
            <div class="form-group" ng-class="{'has-error': addEventForm.time.$invalid && addEventForm.time.$touched}">
                <label>Time</label>
                <input type="time" class="form-control" name="time" placeholder="Time" required ng-model="newEvent.time">
                <span class="help-block" ng-show="addEventForm.time.$invalid && addEventForm.time.$touched">Please enter a start time required</span>
            </div>
            <br>
             <!-- <input type="file" id="fileInput" custom-on-change="getImage" ng-model="testImage" /> -->
            <div id="dragDrop" flow-drop flow-attrs="{accept:'image/*'}" flow-drag-enter="style={border: '4px solid #6AEB81'}" flow-drag-leave="style={}" ng-style="style"/>
                <span>Drag an image here or </span><span id="selectImg" flow-attrs="{accept:'image/*'}" flow-btn />select image</span>
            </div>
            <p class="grey">*images must be .png, .gif, .jpg, .jpeg</p>
            <div class="thumbnail" ng-show="$flow.files.length">
              <img flow-img="$flow.files[0]" />
            </div>
            <div class="btn btn-danger" ng-click="$flow.cancel()">Remove</div>
            <br>
            <br>
            <div class="form-group">
                <label>Tags</label>
                <input type="text" class="form-control" name="tags" placeholder="Tags" ng-model="newEvent.tag">
                <br>
            </div>
            <button type="submit" class="btn btn-primary" ng-click="addEvent()" ng-disabled="addEventForm.$invalid">Submit</button>
        </form>
    </div>
    <!--bootstrap div-->
</div>
</div>
<div id="singleEvent" class="paper">
    <img class="center" src="assets/PushPin.png" />
    <h3>{{newEvent.eventName}}</h3>
    <img class='preview' src='' /><br>
    <!-- <p ng-model='event.zipCode'><strong>zipCode:</strong> {{newEvent.zipCode}}</p> -->
    <p><strong>Address:</strong> {{newEvent.streetAddress}}</p>
    <p ng-model='event.eventDescription'><strong>Description:</strong> {{newEvent.eventDescription}}</p>
    <p ng-model='event.startDate'><strong>Date:</strong> {{newEvent.startDate.toString().slice(0, 15)}}</p>
    <p ng-model='event.time'><strong>Time:</strong> {{newEvent.time.toString().slice(15, 21) + ' ' + newEvent.time.toString().slice(35, 38)}}</p>
    <p ng-model='event.tags'><strong>Tags:</strong> {{newEvent.tag}}</p>
    <br>

    <div
      class="fb-like"
      data-href= = "hhttp://mybooletin.herokuapp.com/#/add"
      data-href= = "http://localhost:4569/#/add"
      data-share="true"
      data-width="450"
      data-show-faces="true">
    </div>
</div>


